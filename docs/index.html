<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@jjwesterkamp/event-delegation</title>
	<meta name="description" content="Documentation for @jjwesterkamp/event-delegation">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@jjwesterkamp/event-delegation</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>@jjwesterkamp/event-delegation</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#event-delegation" id="event-delegation" style="color: inherit; text-decoration: none;">
					<h1>event-delegation</h1>
				</a>
				<p>Event delegation for browser DOM events. Flexible, cross-browser compatible and Typescript-focused.</p>
				<p><a href="https://badge.fury.io/js/%40jjwesterkamp%2Fevent-delegation"><img src="https://badge.fury.io/js/%40jjwesterkamp%2Fevent-delegation.svg" alt="npm version"></a>
					<a href="https://travis-ci.com/JJWesterkamp/event-delegation"><img src="https://travis-ci.com/JJWesterkamp/event-delegation.svg?branch=master" alt="Build Status"></a>
				<a href="https://coveralls.io/github/JJWesterkamp/event-delegation?branch=master"><img src="https://coveralls.io/repos/github/JJWesterkamp/event-delegation/badge.svg?branch=master#" alt="Coverage Status"></a></p>
				<img src="https://user-images.githubusercontent.com/12270687/114304467-9bf16e80-9ad3-11eb-9da5-c0a3b48f3393.jpg" alt="EventDelegation type inference" width="700">
				<a href="#quick-links" id="quick-links" style="color: inherit; text-decoration: none;">
					<h2>Quick links</h2>
				</a>
				<ul>
					<li><a href="https://www.npmjs.com/package/@jjwesterkamp/event-delegation">npm</a></li>
					<li><a href="https://www.jsdelivr.com/package/npm/@jjwesterkamp/event-delegation">jsDelivr</a></li>
					<li><a href="https://github.com/JJWesterkamp/event-delegation">Github</a></li>
					<li><a href="https://github.com/JJWesterkamp/event-delegation/blob/master/CHANGELOG.md">Changelog</a></li>
					<li><a href="https://jjwesterkamp.github.io/event-delegation/">API documentation</a></li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<p><strong>CDN</strong></p>
				<p>You can find this package <a href="https://www.jsdelivr.com/package/npm/@jjwesterkamp/event-delegation">on jsDelivr</a>. The minified UMD bundle is about 1.7KB (gzipped).</p>
				<pre><code class="language-html"><span style="color: #24292EFF">&lt;</span><span style="color: #22863A">script</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">src</span><span style="color: #D32F2F">=</span><span style="color: #22863A">&quot;https://cdn.jsdelivr.net/npm/@jjwesterkamp/event-delegation/umd/event-delegation.min.js&quot;</span><span style="color: #24292EFF">&gt;&lt;/</span><span style="color: #22863A">script</span><span style="color: #24292EFF">&gt;</span>
</code></pre>
				<p><strong>npm</strong></p>
				<p>When installing with <a href="https://www.npmjs.com/package/@jjwesterkamp/event-delegation">npm</a> and using webpack, the package will add about 1KB (gzipped) to your bundle.</p>
				<pre><code><span style="color: #24292EFF">$ npm install @jjwesterkamp</span><span style="color: #D32F2F">/</span><span style="color: #24292EFF">event</span><span style="color: #D32F2F">-</span><span style="color: #24292EFF">delegation </span><span style="color: #D32F2F">--</span><span style="color: #24292EFF">save</span>
</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<pre><code class="language-typescript"><span style="color: #D32F2F">import</span><span style="color: #24292EFF"> EventDelegation </span><span style="color: #D32F2F">from</span><span style="color: #24292EFF"> </span><span style="color: #22863A">&#039;@jjwesterkamp/event-delegation&#039;</span>
</code></pre>
				<p>There are three main functions on the EventDelegation namespace object. All methods are used to start an event listener
				through the same kind of builder-pattern.</p>
				<ol>
					<li><p><a href="#eventdelegationglobal"><code>EventDelegation.global()</code></a></p>
						<p> The <code>global()</code> method is used to attach a global listener on the top-level <code>document.body</code> element.</p>
					</li>
					<li><p><a href="#eventdelegationwithin"><code>EventDelegation.within(root)</code></a></p>
						<p> The <code>within()</code> method is used to provide one alternative root element for the listener.</p>
					</li>
					<li><p><a href="#eventdelegationwithinmany"><code>EventDelegation.withinMany(roots)</code></a></p>
						<p> The <code>withinMany()</code> method is used to provide multiple alternative roots for creating many listeners at once.</p>
					</li>
				</ol>
				<hr>
				<p>The build process has the following 4 steps in the following order, ultimately returning one single or multiple
				<code>EventHandler</code> instances, depending on the called method:</p>
				<p><a href="https://jjwesterkamp.github.io/event-delegation/interfaces/types.askroot.html"><code>AskRoot</code></a> =&gt; <a href="https://jjwesterkamp.github.io/event-delegation/interfaces/types.askevent.html"><code>AskEvent</code></a> =&gt; <a href="https://jjwesterkamp.github.io/event-delegation/interfaces/types.askselector.html"><code>AskSelector</code></a> =&gt; <a href="https://jjwesterkamp.github.io/event-delegation/interfaces/types.asklistener.html"><code>AskListener</code></a> =&gt; <a href="https://jjwesterkamp.github.io/event-delegation/interfaces/types.eventhandler.html"><code>EventHandler</code></a></p>
				<blockquote>
					<p>First, ask for a root, then an event name, then a descendant selector, and finally a listener callback.</p>
				</blockquote>
				<a href="#eventdelegationglobal" id="eventdelegationglobal" style="color: inherit; text-decoration: none;">
					<h3>EventDelegation.global()</h3>
				</a>
				<pre><code class="language-typescript"><span style="color: #C2C3C5">// Pseudo</span>
<span style="color: #1976D2">EventDelegation</span><span style="color: #6F42C1">.global</span><span style="color: #24292EFF">(): AskEvent</span>
</code></pre>
				<p>The following examples use the <code>global()</code> method that attaches an event listener globally to <code>document.body</code>.
				The returned builder ultimately creates an <code>EventHandler&lt;HTMLElement&gt;</code> where <code>HTMLElement</code> is the type of the root <code>document.body</code>.</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.global</span><span style="color: #24292EFF">()</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">(</span><span style="color: #D32F2F">function</span><span style="color: #24292EFF">(event) {</span>
<span style="color: #24292EFF">        </span><span style="color: #1976D2">this</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.add</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button--clicked&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    })</span>
</code></pre>
				<p><strong>Listener callbacks</strong></p>
				<p>Inside the event listener callback, <code>this</code> is the element that matched <code>&quot;button&quot;</code>. In order for <em>this-binding</em> to work, <code>listener</code> must be a
					regular function. For cases where arrow functions are preferred, the event argument provides an additional property <code>delegator</code>
				as an alternative:</p>
				<pre><code class="language-javascript"><span style="color: #24292EFF">EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #C2C3C5">// ...</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">event</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">delegator</span><span style="color: #6F42C1">.</span><span style="color: #1976D2">classList</span><span style="color: #6F42C1">.add</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button--clicked&#039;</span><span style="color: #24292EFF">))</span>
</code></pre>
				<p><strong>Type inference</strong></p>
				<p>This builder pattern is convenient because it allows for automatic type completion of practically all required type information.
					Each of the above steps are represented by interfaces with multiple overloads. Methods that take CSS selectors will attempt
					to parse the selectors and infer the element type from them. The inferred types are then automatically
				known in the listener callback provided in the <code>.listen()</code> step.</p>
				<p>In the above example the event type is automatically identified as <code>MouseEvent</code>, and <code>event.delegator</code> (or <code>this</code>) is
				identified as <code>HTMLButtonElement</code>.</p>
				<p><strong>Supports complex CSS selectors</strong></p>
				<p>Thanks to the great package <a href="https://github.com/g-plane/typed-query-selector">typed-query-selector</a> you can even supply
					complex CSS selectors and the type will automatically be inferred if the selectors are <em>tag-qualified</em> and <em>valid</em>.
					Even grouping selectors are supported, hence in the example below <code>event.delegator</code> is the union type
				<code>HTMLButtonElement | HTMLInputElement</code>:</p>
				<pre><code class="language-typescript"><span style="color: #24292EFF">EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.global</span><span style="color: #24292EFF">()</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;#my-div &gt; button.submit, fieldset input.submit&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// event is DelegationEvent&lt;HTMLButtonElement | HTMLInputElement, MouseEvent, HTMLElement&gt;</span>
</code></pre>
				<p><strong>Event instance types</strong></p>
				<p><a href="https://jjwesterkamp.github.io/event-delegation/modules/types.html#delegationevent"><code>DelegationEvent&lt;D, E, R&gt;</code></a> - This is the actual type of events passed to the listener functions. It has the type parameters <code>D</code> for delegator, <code>E</code> for event and <code>R</code> for root.
				In the above example this means that:</p>
				<ul>
					<li><code>D</code> - <code>event.delegator</code> (and <code>this</code> in regular functions) is <code>HTMLButtonElement | HTMLInputElement</code></li>
					<li><code>E</code> - <code>event</code> is of type <code>MouseEvent</code>, the type of click events</li>
					<li><code>R</code> - <code>event.currentTarget</code> is of type <code>HTMLElement</code>, the type of the body element</li>
				</ul>
				<p><strong>Default types</strong></p>
				<p>The element types will default to <code>Element</code> for CSS selectors that are not tag-qualified or are invalid.
					See the section <strong>Selector matching failure / custom selectors</strong> further down for details about overriding
				these default types.</p>
				<pre><code class="language-typescript"><span style="color: #24292EFF">EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.global</span><span style="color: #24292EFF">()</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;#my-div &gt; .submit-button, fieldset iput.submit&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #C2C3C5">//       ^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^</span>
<span style="color: #24292EFF">    </span><span style="color: #C2C3C5">//       not tag-qualified               invalid (iput)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// event is DelegationEvent&lt;Element, MouseEvent, HTMLElement&gt;</span>
</code></pre>
				<a href="#eventdelegationwithin" id="eventdelegationwithin" style="color: inherit; text-decoration: none;">
					<h3>EventDelegation.within()</h3>
				</a>
				<pre><code class="language-typescript"><span style="color: #C2C3C5">// Pseudo</span>
<span style="color: #1976D2">EventDelegation</span><span style="color: #6F42C1">.within</span><span style="color: #24292EFF">(root: Element </span><span style="color: #D32F2F">|</span><span style="color: #24292EFF"> string): AskEvent</span>
</code></pre>
				<p>Alternatively you can add event listeners to other elements with the <code>within</code>method. It takes either an
				element or a selector.</p>
				<p><strong>Using elements</strong></p>
				<p>In the case of an element its type is preserved and ultimately an <code>EventHandler&lt;T&gt;</code>
				is returned:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">declare</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">myRoot</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">HTMLFormElement</span>

<span style="color: #C2C3C5">// EventHandler&lt;HTMLFormElement&gt;</span>
<span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.within</span><span style="color: #24292EFF">(myRoot)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>
</code></pre>
				<p><strong>Using selectors</strong></p>
				<p>In the case of a selector the type is inferred from the given string just as with the <code>.select()</code> method.
					If the <code>root</code> is a selector, <code>within()</code> will create one single handler for the <strong>first matching element</strong>.
				It will throw an error if the selector is invalid or if no matching root element is found.</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.within</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;form#my-form&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// handler is EventHandler&lt;HTMLFormElement&gt;</span>
</code></pre>
				<a href="#eventdelegationwithinmany" id="eventdelegationwithinmany" style="color: inherit; text-decoration: none;">
					<h3>EventDelegation.withinMany()</h3>
				</a>
				<p>Finally you can add multiple listeners to many root elements at once. Similarly to <code>within()</code>, <code>withinMany()</code> takes either a selector or an array of root element references.</p>
				<p><strong>Using selectors</strong></p>
				<p>When passing a selector the element type is inferred from the given string if possible. The return value of the <code>listen()</code> call will be an array of <code>EventHandler&lt;T&gt;</code>&#39;s:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handlers</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.withinMany</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;form.my-form&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// event.currentTarget is HTMLFormElement</span>
<span style="color: #C2C3C5">// handlers is EventHandler&lt;HTMLFormElement&gt;[]</span>
</code></pre>
				<p>It also copes with complex selectors and grouping selectors that target more than one element type:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handlers</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.withinMany</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;form.my-form, #article fieldset&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// event.currentTarget is HTMLFormElement | HTMLFieldSetElement</span>
<span style="color: #C2C3C5">// handlers is EventHandler&lt;HTMLFormElement | HTMLFieldSetElement&gt;[]</span>
</code></pre>
				<p><strong>Using elements</strong></p>
				<p>Just as with <code>within()</code> you can pass <code>withinMany()</code> element references. It takes an array of elements,
					and will carry their types along to give full knowledge about the possible types of <code>event.currentTarget</code>
				and the created event handlers:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">declare</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">myForm</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">HTMLFormElement</span>
<span style="color: #D32F2F">declare</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">myFieldset</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">HTMLFieldSetElement</span>

<span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handlers</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.withinMany</span><span style="color: #24292EFF">([myForm, myFieldset])</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #C2C3C5">// event.currentTarget is HTMLFormElement | HTMLFieldSetElement</span>
<span style="color: #C2C3C5">// handlers is EventHandler&lt;HTMLFormElement | HTMLFieldSetElement&gt;[]</span>
</code></pre>
				<a href="#eventhandler" id="eventhandler" style="color: inherit; text-decoration: none;">
					<h3>EventHandler</h3>
				</a>
				<p>All creation methods return an EventHandler instance, which has the following shape:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">interface</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">EventHandler</span><span style="color: #24292EFF">&lt;</span><span style="color: #6F42C1">R</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">extends</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">Element</span><span style="color: #24292EFF">&gt; {</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">isAttached</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">boolean</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">isDestroyed</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">boolean</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">root</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">R</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">eventType</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">string</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">selector</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">string</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">remove</span><span style="color: #24292EFF">()</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">void</span>
<span style="color: #24292EFF">}</span>
</code></pre>
				<p>The event handler instance exists primarily to later remove the listener:</p>
				<pre><code class="language-typescript"><span style="color: #1976D2">handler</span><span style="color: #6F42C1">.remove</span><span style="color: #24292EFF">()</span>
</code></pre>
				<p>It additionally has some methods that might be useful, among which <code>selector()</code>, <code>eventType()</code> and <code>root()</code>
				providing the input parameters of creation.</p>
				<p><code>isAttached()</code> will tell whether the listener is active. It&#39;ll always return <code>true</code> until the listener is removed.</p>
				<p><code>isDestroyed()</code> is the opposite of <code>isAttached()</code>, and returns <code>false</code> until the listener is removed.</p>
				<a href="#selector-matching-failure--custom-selectors" id="selector-matching-failure--custom-selectors" style="color: inherit; text-decoration: none;">
					<h3>Selector matching failure / custom selectors</h3>
				</a>
				<p>Methods that take CSS-style selectors might fail to successfully infer an element type for them at some point.
					It might be an error in the selector syntax itself, but might also be a bug in this package. Another case where
					the default selector matching fails are selectors for custom web components. For such cases, all methods that take
					selectors have one final signature overload as a last resort to not ruin your day. They take an explicit type argument
				for the element type, and <em>any</em> string as their selector argument:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.within</span><span style="color: #24292EFF">&lt;</span><span style="color: #6F42C1">CustomComponent</span><span style="color: #24292EFF">&gt;(</span><span style="color: #22863A">&#039;custom-component&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">&lt;</span><span style="color: #6F42C1">CustomButton</span><span style="color: #24292EFF">&gt;(</span><span style="color: #22863A">&#039;custom-button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #1976D2">console</span><span style="color: #6F42C1">.log</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">event</span><span style="color: #24292EFF">.foo) })</span>

<span style="color: #C2C3C5">// event is DelegationEvent&lt;CustomButton, MouseEvent, CustomComponent&gt;</span>
<span style="color: #C2C3C5">// handler is EventHandler&lt;CustomComponent&gt;</span>
</code></pre>
				<a href="#using-custom-events" id="using-custom-events" style="color: inherit; text-decoration: none;">
					<h3>Using custom events</h3>
				</a>
				<p>When using custom events the event types will by default be considered the base type <code>Event</code>. You can
				however append definitions for your custom events to the <code>GlobalEventHandlersEventMap</code>:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">type</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">MyEvent</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">Event</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;</span><span style="color: #24292EFF"> { foo</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">string</span><span style="color: #24292EFF"> }</span>

<span style="color: #D32F2F">declare</span><span style="color: #24292EFF"> global {</span>
<span style="color: #24292EFF">    </span><span style="color: #D32F2F">interface</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">GlobalEventHandlersEventMap</span><span style="color: #24292EFF"> {</span>
<span style="color: #24292EFF">        </span><span style="color: #22863A">&#039;my:event&#039;</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">MyEvent</span>
<span style="color: #24292EFF">    }</span>
<span style="color: #24292EFF">}</span>

<span style="color: #24292EFF">EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.global</span><span style="color: #24292EFF">()</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;my:event&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;td&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #1976D2">console</span><span style="color: #6F42C1">.log</span><span style="color: #24292EFF">(</span><span style="color: #1976D2">event</span><span style="color: #24292EFF">.foo) })</span>

<span style="color: #C2C3C5">// event is DelegationEvent&lt;HTMLTableDataCellElement, Event &amp; {foo: string}, HTMLElement&gt;</span>
</code></pre>
				<p>If you do not want to add declarations to the global event map you can alternatively just provide the event
				type as a type argument:</p>
				<pre><code class="language-typescript"><span style="color: #D32F2F">type</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">MyEvent</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #6F42C1">Event</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">&amp;</span><span style="color: #24292EFF"> { foo</span><span style="color: #D32F2F">:</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">string</span><span style="color: #24292EFF"> }</span>

<span style="color: #6F42C1">EventDelegation</span>
<span style="color: #24292EFF">    .</span><span style="color: #6F42C1">global</span><span style="color: #24292EFF">()</span>
<span style="color: #24292EFF">    .</span><span style="color: #6F42C1">events</span><span style="color: #24292EFF">&lt;</span><span style="color: #6F42C1">MyEvent</span><span style="color: #24292EFF">&gt;(</span><span style="color: #22863A">&#039;my:event&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    .</span><span style="color: #6F42C1">select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;td&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    .</span><span style="color: #6F42C1">listen</span><span style="color: #24292EFF">((event) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #6F42C1">console</span><span style="color: #24292EFF">.</span><span style="color: #6F42C1">log</span><span style="color: #24292EFF">(</span><span style="color: #6F42C1">event</span><span style="color: #24292EFF">.</span><span style="color: #6F42C1">foo</span><span style="color: #24292EFF">) })</span>

<span style="color: #C2C3C5">// event is DelegationEvent&lt;HTMLTableDataCellElement, Event &amp; {foo: string}, HTMLElement&gt;</span>
</code></pre>
				<a href="#initialisation-with-listener-option-once-true" id="initialisation-with-listener-option-once-true" style="color: inherit; text-decoration: none;">
					<h3>Initialisation with listener option <code>once: true</code></h3>
				</a>
				<p>If you give the listener-option <code>once: true</code> to addEventListener calls the listener will automatically be removed
					after being called once. Since with event delegation events are <em>filtered</em> on the condition of a CSS-selector match
					against any ancestor of a respective event target, this package will actually replace <code>once: true</code> options with
					<code>once: false</code>. This prevents that an event-delegation initialisation turns into a no-op because of events that don&#39;t
				match. It will then remove the event listener manually after the first matching event occured.</p>
				<a href="#working-in-javascript---a-few-limitations" id="working-in-javascript---a-few-limitations" style="color: inherit; text-decoration: none;">
					<h3>Working in Javascript - a few limitations</h3>
				</a>
				<p>When working in Javascript you can&#39;t provide explicit type arguments for function calls. Most typescript-savvy editors
					will still give (near) perfect type completion for all cases where the types are
					inferred, such as when using tag selectors and standard event names such as <code>&#39;click&#39;</code>. This is also true when passing
				existing element references if they have the correct type in advance.</p>
				<p>In case of non-recognised CSS selectors element types will most of the time default to <code>Element</code>. In the example below
				<code>x</code> will probably be considered an <code>Element</code>, as well as <code>e.delegator</code>:</p>
				<pre><code class="language-javascript"><span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> EventDelegation</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.within</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;custom-component&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.events</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;click&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.select</span><span style="color: #24292EFF">(</span><span style="color: #22863A">&#039;custom-button&#039;</span><span style="color: #24292EFF">)</span>
<span style="color: #24292EFF">    </span><span style="color: #6F42C1">.listen</span><span style="color: #24292EFF">((e) </span><span style="color: #D32F2F">=&gt;</span><span style="color: #24292EFF"> { </span><span style="color: #C2C3C5">/* ... */</span><span style="color: #24292EFF"> })</span>

<span style="color: #D32F2F">const</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">x</span><span style="color: #24292EFF"> </span><span style="color: #D32F2F">=</span><span style="color: #24292EFF"> </span><span style="color: #1976D2">handler</span><span style="color: #6F42C1">.root</span><span style="color: #24292EFF">()</span>
</code></pre>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>The MIT License (MIT). See <a href="https://github.com/JJWesterkamp/event-delegation/blob/master/LICENSE">license file</a> for more information.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/eventhandler.html">Event<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_closestwithin.html">lib/closest<wbr>Within</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_createbuilder.html">lib/create<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_createcompositebuilder.html">lib/create<wbr>Composite<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_isfunction.html">lib/is<wbr>Function</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_isnil.html">lib/is<wbr>Nil</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_isstring.html">lib/is<wbr>String</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_matches.html">lib/matches</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/lib_normalizeroot.html">lib/normalize<wbr>Root</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/types.html">types</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>